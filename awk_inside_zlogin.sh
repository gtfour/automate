for i in `cat srv.lst` ; do /usr/sbin/zlogin  $i "    SUDO_EXEC_1='/usr/bin/sudo' ; SUDO_EXEC_2='/usr/local/bin/sudo' ; SUDO_EXEC_3='/usr/local/sbin/sudo' ; SUDOERS_1='/usr/local/etc/sudoers' ; SUDOERS_2='/opt/csw/etc/sudoers' ; SUDOERS_3='/etc/sudoers' ; SELECTED_SUDO_EXEC=\$SUDO_EXEC_1 ; SELECTED_SUDOERS=\$SUDOERS_1 ; if [ -f \$SUDO_EXEC_1 ] ; then SELECTED_SUDO_EXEC=\$SUDO_EXEC_1 ; elif [ -f \$SUDO_EXEC_2 ] ;  then  SELECTED_SUDO_EXEC=\$SUDO_EXEC_2 ; elif [ -f \$SUDO_EXEC_3 ] ;     then     SELECTED_SUDO_EXEC=\$SUDO_EXEC_3 ; fi ; if [ -f \$SUDOERS_1 ] ;     then  SELECTED_SUDOERS=\$SUDOERS_1 ; elif [ -f \$SUDOERS_2 ] ;     then   SELECTED_SUDOERS=\$SUDOERS_2 ; elif [ -f \$SUDOERS_3 ] ; then  SELECTED_SUDOERS=\$SUDOERS_3 ; fi ; HST=\`hostname\`; getent passwd  | nawk -v hst=\"\$HST\" -F:  '{printf (hst\"|\"\$1\"|\"\$3\"|\"\$4\"|\"\$5\"|\"\$6\"|\"\$7\"|\") ; system(\" for gid in \`id -G \"\$1\"\`; do all_groups=\`getent group | cut -f 1,3 -d :\`  ;  selected=\`for ganame in \$all_groups  ; do  echo \$ganame | grep :\$gid\$ | cut -f 1 -d : ; done \`; result=\$selected\\\" \\\"\$result  ; done ; echo \$result\") }'  " ; done
